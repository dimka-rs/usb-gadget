# Переменные окружения для скрипта

При подключении виртуальной флешки появится файл **gadget.config.current.txt**, если устройство уже настроено, или **gadget.config.default.txt**, если настроек ещё нет. Необходимо задать настройки сетевого диска из раздела ниже в файле конфигурации, после чего переименовать его в **gadget.config.txt**. Устройство обнаружит новый файл настроек и перезагрузится.

## Сетевой диск

* **SMBUSER** - имя пользователя сетевого диска
* **SMBPASS** - пароль пользователя сетевого диска
* **SMBSRV** - путь к сетевому диску в виде *HOST/shared_folder*


## Внутренние переменные

В скобках значения по умолчанию

* **ENVFILE** - файл с текущими настройками с системе (/etc/gadget.env)
* **ENVFILE_DEF** - файл с настройками по умолчания (/etc/gadget.config.default.txt)
* **ENVFILE_CUR** - файл с текущими настройками на виртуальной флешке (gadget.config.current.txt)
* **ENVFILE_NEW** - файл с новыми настройками на виртуальной флешке (gadget.config.txt)
* **NETSTATUS_LOCAL_FILE** - файл состояния сети в системе, копируется на виртуальную флешку при её создании (/tmp/gadget.network.txt)
* **DMESG_LOCAL_FILE** - файл лога загрузки в системе, копируется на виртуальную флешку при её создании (/tmp/gadget.dmesg.txt)
* **DF_STATUS_FILE** - файл с логом свободного места на сетевом диске (gadget.df.txt)
* **DMESG_STATUS_FILE** - файл с логом загрузки на сетевом диске (gadget.dmesg.txt)
* **IMAGE_FILE** - файл с образорм виртуальной флешки(/root/gadget.lun0.img)
* **IMAGE_SIZE** - размер виртуальной флешки в МБ (2048)
* **FAIL_IMAGE_FILE** - файл с образом виртуальной флешки при отсутствии сетевого диска (/tmp/gadget.lun0.img)
* **FAIL_IMAGE_SIZE** - размер виртуальной флешки в МБ при отсутствии сетевого диска (128)
* **SMB_FAIL_CNT** - количество попыток подключить сетевой диск (10)
* **SMB_FAIL_DELAY**  задержка в секундах между попытками (10)
* **SMB_FAIL_DIR** - имя каталога на виртуальной флешке при ошибке сетевого диска (SMB_ERROR)
* **SMBMNT** - точка монтировния сетевого диска (/mnt/gadget.samba)
* **UPDATE_FILE** - имя файла с обновлением скрипта (gadget.update.deb)
